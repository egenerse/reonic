# GraphQL Mutations and Queries for Simulation

# Data Model:
# - SimulationInput: Stores input parameters (chargePoints, arrivalMultiplier, etc.)
# - SimulationOutput: Stores computation results (totalEnergyChargedKwh, chargingEvents, etc.)
#
# Note: The GraphQL query names still use "simulationResult" for the SimulationInput type
# for backward compatibility, but semantically it represents simulation input parameters.

## Smart Query - Get Simulation by Parameters (Recommended)
# This query checks if simulation exists for given parameters
# If exists, returns cached result. If not, creates and runs simulation automatically
query GetSimulation {
  getSimulation(
    params: {
      chargePoints: 10
      arrivalMultiplier: 1.2
      carConsumptionKwh: 18.0
      chargingPowerKw: 11.0
    }
  ) {
    id
    chargePoints
    arrivalMultiplier
    carConsumptionKwh
    chargingPowerKw
    createdAt
    updatedAt
    simulationOutputs {
      id
      totalEnergyChargedKwh
      chargingEventsYear
      chargingEventsMonth
      chargingEventsWeek
      chargingEventsDay
      chargingValues
      exemplaryDay
      createdAt
    }
  }
}

## Create New Simulation Input (Force new calculation)
# This mutation always creates a new simulation input, even if parameters already exist
mutation CreateSimulation {
  createSimulation(
    data: {
      chargePoints: 5
      arrivalMultiplier: 1.0
      carConsumptionKwh: 20.0
      chargingPowerKw: 22.0
    }
  ) {
    id
    chargePoints
    arrivalMultiplier
    carConsumptionKwh
    chargingPowerKw
    createdAt
    updatedAt
    simulationOutputs {
      id
      totalEnergyChargedKwh
      chargingEventsYear
      chargingEventsMonth
      chargingEventsWeek
      chargingEventsDay
      chargingValues
      exemplaryDay
      createdAt
    }
  }
}

## Get All Simulation Inputs
query GetAllSimulationInputs {
  simulationResults {
    id
    chargePoints
    arrivalMultiplier
    carConsumptionKwh
    chargingPowerKw
    createdAt
    updatedAt
    simulationOutputs {
      id
      totalEnergyChargedKwh
      chargingEventsYear
      chargingEventsMonth
      chargingEventsWeek
      chargingEventsDay
      chargingValues
      exemplaryDay
      createdAt
    }
  }
}

## Get Specific Simulation Input
query GetSpecificSimulationInput {
  simulationResult(id: 1) {
    id
    chargePoints
    arrivalMultiplier
    carConsumptionKwh
    chargingPowerKw
    createdAt
    updatedAt
    simulationOutputs {
      id
      totalEnergyChargedKwh
      chargingEventsYear
      chargingEventsMonth
      chargingEventsWeek
      chargingEventsDay
      chargingValues
      exemplaryDay
      createdAt
    }
  }
}

## Update Simulation Input
mutation UpdateSimulationInput {
  updateSimulation(id: 1, data: { chargePoints: 15, arrivalMultiplier: 1.5 }) {
    id
    chargePoints
    arrivalMultiplier
    carConsumptionKwh
    chargingPowerKw
    updatedAt
    simulationOutputs {
      id
      totalEnergyChargedKwh
      chargingEventsYear
    }
  }
}

## Delete Simulation Input (also deletes related outputs)
mutation DeleteSimulationInput {
  deleteSimulation(id: 1)
}
